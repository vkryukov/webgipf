<!DOCTYPE html>
<html>

<head>
    <title>WebSocket Test</title>
</head>

<body>
    <h1>Messages Received So Far</h1>
    <div id="messages"></div>
    <script>
        // Hardcoded game ID and token for demonstration purposes
        const gameId = '1';
        const token = 'd8cabd86d6078fae2e78513be3f346e6';

        // Construct the WebSocket URL
        const wsUrl = 'ws://localhost:8080/game?id=' + gameId + '&token=' + token;
        const socket = new WebSocket(wsUrl);

        // Function to format the current time as a string with milliseconds
        function getCurrentTimeString() {
            const now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' +
                now.getMinutes().toString().padStart(2, '0') + ':' +
                now.getSeconds().toString().padStart(2, '0') + '.' +
                now.getMilliseconds().toString().padStart(3, '0');
        }

        // WebSocket event for when a connection is opened
        socket.onopen = function (event) {
            console.log(`[${getCurrentTimeString()}] WebSocket connection established`);
        };

        // WebSocket event for handling incoming messages
        socket.onmessage = function (event) {
            console.log(`[${getCurrentTimeString()}] Message received:`, event.data);
            addMessage(event.data);
        };

        // WebSocket event for when the connection is closed
        socket.onclose = function (event) {
            console.log(`[${getCurrentTimeString()}] WebSocket connection closed`);
        };

        // Function to add a message to the page
        function addMessage(message) {
            var messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `${getCurrentTimeString()} - ${message}<br>`;
        }
    </script>

</body>

</html>